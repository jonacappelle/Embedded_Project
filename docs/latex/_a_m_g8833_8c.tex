\hypertarget{_a_m_g8833_8c}{}\doxysection{Embedded\+\_\+1\+\_\+\+A\+M\+G8833\+\_\+\+Temp\+\_\+\+Sensor/\+A\+M\+G8833/\+A\+M\+G8833.c File Reference}
\label{_a_m_g8833_8c}\index{Embedded\_1\_AMG8833\_Temp\_Sensor/AMG8833/AMG8833.c@{Embedded\_1\_AMG8833\_Temp\_Sensor/AMG8833/AMG8833.c}}


Interface with A\+M\+G8833 IR Temp camera.  


{\ttfamily \#include \char`\"{}A\+M\+G8833.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}I2\+C.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug\+\_\+dbprint.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}em\+\_\+usart.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{_a_m_g8833_8c_a76e12be9b0c55532b6400f94a60ceadb}{A\+M\+G8833\+\_\+\+Thermistor\+\_\+\+Read}} (float $\ast$r\+Buffer\+\_\+\+Thermistor)
\begin{DoxyCompactList}\small\item\em Read the thermistor value of the A\+M\+G8833 IR sensor The data is processed as described in the datasheet. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_a_m_g8833_8c_a0e35ea54bb99d2f7f41ec1714e127ab2}{A\+M\+G8833\+\_\+\+Pixels\+\_\+\+Read}} (float $\ast$r\+Buffer\+\_\+\+Pixels)
\begin{DoxyCompactList}\small\item\em Read the value of all 64 IR pixels The data is processed as described in the datasheet. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_a_m_g8833_8c_ad4ed399e94a72097a5931f68e201f600}{A\+M\+G8833\+\_\+\+Pixel\+\_\+\+Print}} (float $\ast$r\+Buffer\+\_\+\+Pixels)
\begin{DoxyCompactList}\small\item\em Print all the values of the IR pixel array. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_a_m_g8833_8c_af57825d9792585be95870fde64d4c51c}{A\+M\+G8833\+\_\+\+Sleep}} (bool enable)
\begin{DoxyCompactList}\small\item\em Function to set the A\+M\+G8833 to sleep. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_a_m_g8833_8c_ab4bcae84c5bbeed464be55a494aad6b4}{A\+M\+G8833\+\_\+\+Stand\+By}} (uint8\+\_\+t time)
\begin{DoxyCompactList}\small\item\em Set A\+G\+M8833 in stand by. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_a_m_g8833_8c_a06d3f503511d5679583f0fb99a2f0228}{A\+M\+G8833\+\_\+\+Reset}} (void)
\begin{DoxyCompactList}\small\item\em Resets the A\+M\+G8833 sensor to default settings. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Interface with A\+M\+G8833 IR Temp camera. 

\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyAuthor}{Author}
Jona Cappelle \& Thomas Feys 
\end{DoxyAuthor}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{_a_m_g8833_8c_ad4ed399e94a72097a5931f68e201f600}\label{_a_m_g8833_8c_ad4ed399e94a72097a5931f68e201f600}} 
\index{AMG8833.c@{AMG8833.c}!AMG8833\_Pixel\_Print@{AMG8833\_Pixel\_Print}}
\index{AMG8833\_Pixel\_Print@{AMG8833\_Pixel\_Print}!AMG8833.c@{AMG8833.c}}
\doxysubsubsection{\texorpdfstring{AMG8833\_Pixel\_Print()}{AMG8833\_Pixel\_Print()}}
{\footnotesize\ttfamily void A\+M\+G8833\+\_\+\+Pixel\+\_\+\+Print (\begin{DoxyParamCaption}\item[{float $\ast$}]{r\+Buffer\+\_\+\+Pixels }\end{DoxyParamCaption})}



Print all the values of the IR pixel array. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em r\+Buffer\+\_\+\+Pixels} & Address where the read thermistor value is stored \\
\hline
\end{DoxyParams}


Definition at line 84 of file A\+M\+G8833.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{85 \{}
\DoxyCodeLine{86 \textcolor{preprocessor}{\#if DEBUG\_DBPRINT == 1 }\textcolor{comment}{/* DEBUG\_DBPRINT */}\textcolor{preprocessor}{}}
\DoxyCodeLine{87 }
\DoxyCodeLine{88     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j=0; j<8; j++)}
\DoxyCodeLine{89     \{}
\DoxyCodeLine{90         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<8; i++)}
\DoxyCodeLine{91         \{}
\DoxyCodeLine{92             dbprintInt( (\textcolor{keywordtype}{int}) rBuffer\_Pixels[j*8+i] );}
\DoxyCodeLine{93             dbprint(\textcolor{stringliteral}{"   "});}
\DoxyCodeLine{94         \}}
\DoxyCodeLine{95         dbprintln(\textcolor{stringliteral}{""});}
\DoxyCodeLine{96     \}}
\DoxyCodeLine{97     dbprintln(\textcolor{stringliteral}{"-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/"});}
\DoxyCodeLine{98 }
\DoxyCodeLine{99 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* DEBUG\_DBPRINT */}\textcolor{preprocessor}{}}
\DoxyCodeLine{100 \}}

\end{DoxyCode}
\mbox{\Hypertarget{_a_m_g8833_8c_a0e35ea54bb99d2f7f41ec1714e127ab2}\label{_a_m_g8833_8c_a0e35ea54bb99d2f7f41ec1714e127ab2}} 
\index{AMG8833.c@{AMG8833.c}!AMG8833\_Pixels\_Read@{AMG8833\_Pixels\_Read}}
\index{AMG8833\_Pixels\_Read@{AMG8833\_Pixels\_Read}!AMG8833.c@{AMG8833.c}}
\doxysubsubsection{\texorpdfstring{AMG8833\_Pixels\_Read()}{AMG8833\_Pixels\_Read()}}
{\footnotesize\ttfamily void A\+M\+G8833\+\_\+\+Pixels\+\_\+\+Read (\begin{DoxyParamCaption}\item[{float $\ast$}]{r\+Buffer\+\_\+\+Pixels }\end{DoxyParamCaption})}



Read the value of all 64 IR pixels The data is processed as described in the datasheet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em r\+Buffer\+\_\+\+Pixels} & Begin address where the read values of the pixel array is stored \\
\hline
\end{DoxyParams}


Definition at line 59 of file A\+M\+G8833.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{60 \{}
\DoxyCodeLine{61     uint8\_t rBuffer[128];}
\DoxyCodeLine{62     uint8\_t wBuffer[2];}
\DoxyCodeLine{63     wBuffer[0] = \mbox{\hyperlink{_a_m_g8833_8h_afa30659fd092e0f59f57849add744531}{PIXEL\_1\_L}};}
\DoxyCodeLine{64     wBuffer[1] = 0x00;}
\DoxyCodeLine{65 }
\DoxyCodeLine{66     \mbox{\hyperlink{_i2_c_8c_a06104f2b83b9e221737ba5a75c6edc4c}{IIC\_WriteReadBuffer}}(\mbox{\hyperlink{_a_m_g8833_8h_a770f0c15acd838afca500d56b792c6b5}{I2C\_ADDRESS}}, wBuffer, 1, rBuffer, 128);}
\DoxyCodeLine{67 }
\DoxyCodeLine{68     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<64; i++)}
\DoxyCodeLine{69     \{}
\DoxyCodeLine{70         rBuffer\_Pixels[i] = ( ( rBuffer[2*i+1] << 8 ) | rBuffer[2*i] ) * \mbox{\hyperlink{_a_m_g8833_8h_a595ff2807106d2c411a5747323ad6112}{PIXEL\_RES}};}
\DoxyCodeLine{71 }
\DoxyCodeLine{72     \}}
\DoxyCodeLine{73 \}}

\end{DoxyCode}
\mbox{\Hypertarget{_a_m_g8833_8c_a06d3f503511d5679583f0fb99a2f0228}\label{_a_m_g8833_8c_a06d3f503511d5679583f0fb99a2f0228}} 
\index{AMG8833.c@{AMG8833.c}!AMG8833\_Reset@{AMG8833\_Reset}}
\index{AMG8833\_Reset@{AMG8833\_Reset}!AMG8833.c@{AMG8833.c}}
\doxysubsubsection{\texorpdfstring{AMG8833\_Reset()}{AMG8833\_Reset()}}
{\footnotesize\ttfamily void A\+M\+G8833\+\_\+\+Reset (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Resets the A\+M\+G8833 sensor to default settings. 



Definition at line 172 of file A\+M\+G8833.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{173 \{}
\DoxyCodeLine{174 }
\DoxyCodeLine{175 \}}

\end{DoxyCode}
\mbox{\Hypertarget{_a_m_g8833_8c_af57825d9792585be95870fde64d4c51c}\label{_a_m_g8833_8c_af57825d9792585be95870fde64d4c51c}} 
\index{AMG8833.c@{AMG8833.c}!AMG8833\_Sleep@{AMG8833\_Sleep}}
\index{AMG8833\_Sleep@{AMG8833\_Sleep}!AMG8833.c@{AMG8833.c}}
\doxysubsubsection{\texorpdfstring{AMG8833\_Sleep()}{AMG8833\_Sleep()}}
{\footnotesize\ttfamily void A\+M\+G8833\+\_\+\+Sleep (\begin{DoxyParamCaption}\item[{bool}]{enable }\end{DoxyParamCaption})}



Function to set the A\+M\+G8833 to sleep. 

Power consumption sleep\+: 0.\+2 mA

\begin{DoxyNote}{Note}
In sleep mode, nothing can be read from the registers
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em enable} & \begin{DoxyItemize}
\item \textquotesingle{}true\textquotesingle{} -\/ sleep mode \item \textquotesingle{}false\textquotesingle{} -\/ normal mode \end{DoxyItemize}
\\
\hline
\end{DoxyParams}


Definition at line 118 of file A\+M\+G8833.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{119 \{}
\DoxyCodeLine{120     uint8\_t rBuffer[1];}
\DoxyCodeLine{121     uint8\_t wBuffer[2];}
\DoxyCodeLine{122     wBuffer[0] = \mbox{\hyperlink{_a_m_g8833_8h_a5c63654ae2d0793b149ea526b1813a82}{POWER\_CONTROL}};}
\DoxyCodeLine{123 }
\DoxyCodeLine{124     \textcolor{keywordflow}{if}(enable)}
\DoxyCodeLine{125     \{}
\DoxyCodeLine{126         wBuffer[1] = \mbox{\hyperlink{_a_m_g8833_8h_a2df55e40cca9e3d5d2cb697d8e3fd25b}{POWER\_CONTROL\_SLEEP}};}
\DoxyCodeLine{127     \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{128         wBuffer[1] = \mbox{\hyperlink{_a_m_g8833_8h_a3e99539f68b3428ce90bcf6c6663d87f}{POWER\_CONTROL\_NORMAL}};}
\DoxyCodeLine{129     \}}
\DoxyCodeLine{130     \mbox{\hyperlink{_i2_c_8c_a47431e985fd340e0e1d8a112bfe9ddcc}{IIC\_WriteBuffer}}(\mbox{\hyperlink{_a_m_g8833_8h_a770f0c15acd838afca500d56b792c6b5}{I2C\_ADDRESS}}, wBuffer, 2);}
\DoxyCodeLine{131 }
\DoxyCodeLine{132 \}}

\end{DoxyCode}
\mbox{\Hypertarget{_a_m_g8833_8c_ab4bcae84c5bbeed464be55a494aad6b4}\label{_a_m_g8833_8c_ab4bcae84c5bbeed464be55a494aad6b4}} 
\index{AMG8833.c@{AMG8833.c}!AMG8833\_StandBy@{AMG8833\_StandBy}}
\index{AMG8833\_StandBy@{AMG8833\_StandBy}!AMG8833.c@{AMG8833.c}}
\doxysubsubsection{\texorpdfstring{AMG8833\_StandBy()}{AMG8833\_StandBy()}}
{\footnotesize\ttfamily void A\+M\+G8833\+\_\+\+Stand\+By (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{time }\end{DoxyParamCaption})}



Set A\+G\+M8833 in stand by. 

Power consumption stand-\/by\+: 0.\+8 mA

\begin{DoxyNote}{Note}
Can\textquotesingle{}t go from S\+L\+E\+EP to S\+T\+A\+N\+D-\/\+B\+Y!
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em time} & \begin{DoxyItemize}
\item {\ttfamily S\+T\+B\+Y\+\_\+10} -\/ Sets interval to 10sec \item {\ttfamily S\+T\+B\+Y\+\_\+60} -\/ Sets interval to 60sec \end{DoxyItemize}
\\
\hline
\end{DoxyParams}


Definition at line 149 of file A\+M\+G8833.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{150 \{}
\DoxyCodeLine{151     uint8\_t wBuffer[2];}
\DoxyCodeLine{152     wBuffer[0] = \mbox{\hyperlink{_a_m_g8833_8h_a5c63654ae2d0793b149ea526b1813a82}{POWER\_CONTROL}};}
\DoxyCodeLine{153 }
\DoxyCodeLine{154     \textcolor{keywordflow}{switch}(time)}
\DoxyCodeLine{155     \{}
\DoxyCodeLine{156     \textcolor{keywordflow}{case} \mbox{\hyperlink{_a_m_g8833_8h_acc1094023bf211ea5d86b015f9b8146e}{STBY\_10}}:}
\DoxyCodeLine{157         wBuffer[1] = \mbox{\hyperlink{_a_m_g8833_8h_a07484dab300be97379243fe91835153d}{POWER\_CONTROL\_STBY\_10}};}
\DoxyCodeLine{158         \textcolor{keywordflow}{break};}
\DoxyCodeLine{159     \textcolor{keywordflow}{case} \mbox{\hyperlink{_a_m_g8833_8h_a5390b7679b27dfdedcf1ac5a88cc3593}{STBY\_60}}:}
\DoxyCodeLine{160         wBuffer[1] = \mbox{\hyperlink{_a_m_g8833_8h_ad615361da26cfe238974693149f5019f}{POWER\_CONTROL\_STBY\_60}};}
\DoxyCodeLine{161         \textcolor{keywordflow}{break};}
\DoxyCodeLine{162     \}}
\DoxyCodeLine{163 }
\DoxyCodeLine{164     \mbox{\hyperlink{_i2_c_8c_a47431e985fd340e0e1d8a112bfe9ddcc}{IIC\_WriteBuffer}}(\mbox{\hyperlink{_a_m_g8833_8h_a770f0c15acd838afca500d56b792c6b5}{I2C\_ADDRESS}}, wBuffer, 2);}
\DoxyCodeLine{165 \}}

\end{DoxyCode}
\mbox{\Hypertarget{_a_m_g8833_8c_a76e12be9b0c55532b6400f94a60ceadb}\label{_a_m_g8833_8c_a76e12be9b0c55532b6400f94a60ceadb}} 
\index{AMG8833.c@{AMG8833.c}!AMG8833\_Thermistor\_Read@{AMG8833\_Thermistor\_Read}}
\index{AMG8833\_Thermistor\_Read@{AMG8833\_Thermistor\_Read}!AMG8833.c@{AMG8833.c}}
\doxysubsubsection{\texorpdfstring{AMG8833\_Thermistor\_Read()}{AMG8833\_Thermistor\_Read()}}
{\footnotesize\ttfamily void A\+M\+G8833\+\_\+\+Thermistor\+\_\+\+Read (\begin{DoxyParamCaption}\item[{float $\ast$}]{r\+Buffer\+\_\+\+Thermistor }\end{DoxyParamCaption})}



Read the thermistor value of the A\+M\+G8833 IR sensor The data is processed as described in the datasheet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em r\+Buffer\+\_\+\+Thermistor} & Address where the read thermistor value is stored \\
\hline
\end{DoxyParams}


Definition at line 37 of file A\+M\+G8833.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{38 \{}
\DoxyCodeLine{39     uint8\_t rBuffer[2];}
\DoxyCodeLine{40     uint8\_t wBuffer[2];}
\DoxyCodeLine{41     wBuffer[0] = \mbox{\hyperlink{_a_m_g8833_8h_a51576aa742d7c37192f1524451ae4cf3}{THERMISTOR\_OUTPUT\_VALUE\_L}};}
\DoxyCodeLine{42     wBuffer[1] = 0x00;}
\DoxyCodeLine{43 }
\DoxyCodeLine{44     \mbox{\hyperlink{_i2_c_8c_a06104f2b83b9e221737ba5a75c6edc4c}{IIC\_WriteReadBuffer}}(\mbox{\hyperlink{_a_m_g8833_8h_a770f0c15acd838afca500d56b792c6b5}{I2C\_ADDRESS}}, wBuffer, 1, rBuffer, 2);}
\DoxyCodeLine{45 }
\DoxyCodeLine{46     *rBuffer\_Thermistor = ( ( rBuffer[1] << 8 ) | rBuffer[0] ) * \mbox{\hyperlink{_a_m_g8833_8h_aaee85d85c3c34cf341f5eaacd8228ea6}{THERMISTOR\_RES}};}
\DoxyCodeLine{47 \}}

\end{DoxyCode}
